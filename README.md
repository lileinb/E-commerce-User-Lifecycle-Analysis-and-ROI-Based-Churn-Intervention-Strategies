# 电商用户生命周期分析与流失预警模型 (升级版)
### E-commerce User Lifecycle Analysis with LTV Quantification and Predictive Churn Modeling

---

### 1. 项目概述 (Project Overview)

本项目是一个端到端的、以解决真实商业痛点为目标的综合性数据科学项目。面对线上流量红利见顶、获客成本攀升的挑战，本项目的核心目标是从粗放的用户运营转向**数据驱动的精细化、自动化用户生命周期管理**。

项目从超过54万行的原始交易数据出发，深度实践了从**数据清洗与准备、RFM用户价值分层、交互式可视化看板搭建、LTV（用户生命周期价值）量化、流失用户预测建模、SMOTE模型优化，到最终SHAP归因分析**的全链路流程。最终不仅构建了一个能够有效识别潜在流失用户的模型，更揭示了驱动用户行为变化的关键因素，为业务方制定精准的、高ROI的干预策略提供了坚实的数据支持。

* **GitHub仓库:** `[请在这里粘贴你的GitHub仓库链接]`
* **交互式可视化看板:** `[请在这里粘贴你的Tableau Public作品链接]`

### 2. 商业问题与分析目标 (Business Problem & Objectives)

* **核心痛点:** 如何在存量市场中提升用户价值，有效预测并降低高价值用户的流失率？
* **分析目标:**
    1.  **用户分层:** 对现有用户进行科学、有效的价值分层，实现差异化运营。
    2.  **价值量化:** 精确估算不同用户群体的长期价值(LTV)，为运营资源的战略性分配提供财务依据。
    3.  **流失预测:** 构建机器学习模型，提前、准确地识别出具有流失倾向的用户。
    4.  **归因分析:** 深度洞察导致用户流失的关键行为是什么，从而赋能业务制定精准的挽留策略。

### 3. 技术栈 (Tech Stack)

* **数据处理与建模:**
    * `Python 3.x`
    * `Pandas`: 数据清洗、转换与处理
    * `NumPy`: 高性能数值计算
    * `Scikit-learn`: 机器学习（逻辑回归、数据划分）
    * `Imbalanced-learn`: 处理数据不平衡问题 (SMOTE)
* **可视化与模型解释:**
    * `Matplotlib` & `Seaborn`: 探索性数据分析与静态图表绘制
    * `Tableau Public`: 交互式仪表板搭建与商业洞察呈现
    * `SHAP`: 机器学习模型可解释性分析与归因

### 4. 项目流程与文件结构 (Project Workflow & File Structure)

项目遵循模块化的开发原则，职责清晰分离：

1.  **`Data_Cleaning.py`**:
    * **职责:** 数据准备、特征工程与价值量化。
    * **输入:** `online_retail.csv`
    * **流程:** EDA -> 数据清洗 -> RFM模型构建 -> **LTV估算** -> **定义流失标签** -> 构建高级行为特征。
    * **输出:** `rfm_final_for_modeling.csv` 和 `rfm_for_tableau.csv`。

2.  **`Feature_Project.py`** (或 `Model_Training.py`):
    * **职责:** 机器学习建模、优化与解释。
    * **输入:** `rfm_final_for_modeling.csv`
    * **流程:** 加载数据 -> 数据集划分 -> **应用SMOTE优化训练集** -> 训练逻辑回归模型 -> 模型评估 -> **应用SHAP进行模型解释**。
    * **输出:** `confusion_matrix.png` 和 `shap_summary_plot.png`。

3.  **Tableau工作簿 (`.twbx`)**:
    * **职责:** 商业洞察可视化。
    * **输入:** `rfm_for_tableau.csv`
    * **流程:** 创建三个核心视图（用户数量、价值贡献、行为矩阵），并整合为交互式`RFM用户价值分析看板`。

### 5. 核心发现与业务洞察 (Key Findings & Business Insights)

#### 5.1 用户LTV量化洞察
通过对历史利润贡献的估算，我们量化了不同用户群体的平均LTV，发现了巨大的价值鸿沟：
* **顶层用户价值极高：** “高价值新客户”、“重要价值客户”等群体的**人均LTV超过1200元**。
* **普通用户价值差异大：** “中价值客户”人均LTV约318元，而“潜力客户”等群体的人均LTV仅约124元。
* **商业启示：** 运营资源（如营销预算、VIP服务）应高度聚焦于人均LTV最高的顶层用户，以实现ROI最大化。

#### 5.2 模型性能与优化成果
* **初始模型困境：** 由于数据类别不平衡（流失用户为少数类），初始模型的**召回率(Recall)仅为24%**，会漏掉大量即将流失的用户。
* **SMOTE优化效果：** 应用SMOTE技术平衡训练集后，新模型的**召回率大幅提升至72%**，成功地将模型的“短板”补齐，使其具备了强大的潜在流失用户识别能力。

#### 5.3 用户流失归因洞察 (From SHAP)
SHAP模型解释框架为我们揭示了驱动用户流失的三大关键行为信号：
1.  **忠诚度与价值感下降 (`F_Score`, `M_Score`):** 用户的购买频率和消费等级是其留存意愿最强的决定因素。
2.  **购买行为不稳定 (`PurchaseIntervalStd`):** 用户的购买周期变得毫无规律（标准差增大），是其即将流失的最危险信号。
3.  **兴趣广度收窄 (`UniqueProductsCount`):** 用户购买的商品品类越单一，其流失风险越高。
* **商业启示：** 运营团队应建立监控机制，重点关注高价值用户上述指标的异常波动，并采取主动干预措施，如在其购买周期变得不稳时，推送个性化优惠券以维持其活跃度。

### 6. 如何运行 (How to Run)

1.  **环境准备:**
    ```bash
    pip install pandas numpy scikit-learn imbalanced-learn seaborn matplotlib shap
    ```
2.  **数据清洗与特征工程:**
    * 将原始数据 `online_retail.csv` 放置在项目根目录。
    * 运行 `Data_Cleaning.py` 脚本：
        ```bash
        python Data_Cleaning.py
        ```
3.  **模型训练与解释:**
    * 运行 `Feature_Project.py` 脚本：
        ```bash
        python Feature_Project.py
        ```
4.  **交互式可视化:**
    * 安装 Tableau Public 或 Tableau Desktop。
    * 打开软件，连接到数据源 `rfm_for_tableau.csv` 即可。

### 7. 总结 (Conclusion)

本项目通过一个完整的端到端分析流程，不仅成功构建了一个能够有效识别潜在流失用户的机器学习模型，更重要的是，通过模型解释深刻洞察了导致用户流失的关键行为因素。这些基于数据的洞察，能够直接指导业务部门制定出更精准、ROI更高的用户挽留策略，从而实现数据价值的商业闭环。
